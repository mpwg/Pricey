# Pricey Production Environment Configuration
# Copyright (C) 2025 Matthias Wallner-GÃ©hri
# Licensed under AGPL-3.0
#
# Copy this file to .env.production and fill in your production values
# NEVER commit .env.production to version control!

# =============================================================================
# REQUIRED SECRETS - MUST BE SET
# =============================================================================

# PostgreSQL Database
POSTGRES_USER=pricey
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
POSTGRES_DB=pricey
POSTGRES_PORT=5432

# Redis Cache (must set password in production)
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD_HERE
REDIS_PORT=6379

# MinIO/S3 Storage
MINIO_ROOT_USER=CHANGE_ME_MINIO_USER
MINIO_ROOT_PASSWORD=CHANGE_ME_MINIO_PASSWORD_HERE
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001

# Session Secret (generate with: openssl rand -hex 32)
SESSION_SECRET=CHANGE_ME_SESSION_SECRET_32_BYTES_HEX

# =============================================================================
# APPLICATION PORTS
# =============================================================================

API_PORT=3001
OCR_PORT=3002
WEB_PORT=3000
OLLAMA_PORT=11434

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================

# For self-hosted MinIO (included in docker-compose)
STORAGE_ENDPOINT=http://minio:9000
STORAGE_REGION=us-east-1
STORAGE_BUCKET=pricey-receipts
STORAGE_ACCESS_KEY_ID=${MINIO_ROOT_USER}
STORAGE_SECRET_ACCESS_KEY=${MINIO_ROOT_PASSWORD}
STORAGE_PUBLIC_URL=https://storage.yourdomain.com

# OR for AWS S3:
# STORAGE_ENDPOINT=https://s3.amazonaws.com
# STORAGE_REGION=us-east-1
# STORAGE_BUCKET=your-bucket-name
# STORAGE_ACCESS_KEY_ID=your-aws-access-key
# STORAGE_SECRET_ACCESS_KEY=your-aws-secret-key
# STORAGE_PUBLIC_URL=https://your-bucket-name.s3.amazonaws.com

# OR for Cloudflare R2:
# STORAGE_ENDPOINT=https://your-account-id.r2.cloudflarestorage.com
# STORAGE_REGION=auto
# STORAGE_BUCKET=pricey-receipts
# STORAGE_ACCESS_KEY_ID=your-r2-access-key
# STORAGE_SECRET_ACCESS_KEY=your-r2-secret-key
# STORAGE_PUBLIC_URL=https://storage.yourdomain.com

# =============================================================================
# LLM PROVIDER CONFIGURATION
# =============================================================================

# Choose: "ollama" for self-hosted OR "github" for GitHub Models
LLM_PROVIDER=github

# For GitHub Models (recommended for production)
GITHUB_TOKEN=your_github_personal_access_token_here

# For self-hosted Ollama (uncomment ollama service in docker-compose.prod.yml)
# LLM_PROVIDER=ollama
# OLLAMA_HOST=http://ollama:11434

# =============================================================================
# SECURITY & CORS
# =============================================================================

# CORS Origins (comma-separated for multiple)
CORS_ORIGIN=https://yourdomain.com,https://www.yourdomain.com

# Rate Limiting
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=60000

# =============================================================================
# FRONTEND CONFIGURATION (Next.js)
# =============================================================================

# API URL (for frontend to call backend)
# Internal (container-to-container): http://api-gateway:3001/api/v1
# External (browser): https://api.yourdomain.com/api/v1
NEXT_PUBLIC_API_URL=https://api.yourdomain.com/api/v1

# Sentry Error Tracking (optional)
NEXT_PUBLIC_SENTRY_DSN=

# Plausible Analytics (optional)
NEXT_PUBLIC_PLAUSIBLE_DOMAIN=yourdomain.com

# =============================================================================
# MONITORING & LOGGING
# =============================================================================

LOG_LEVEL=info

# Sentry Error Tracking (optional)
SENTRY_DSN=
SENTRY_ENVIRONMENT=production

# =============================================================================
# COMPOSE PROFILES (optional)
# =============================================================================

# Uncomment to enable Ollama service by default
# COMPOSE_PROFILES=ollama
